((function(){this.CS.ReportCardChart=function(){function a(a){this.options=a,this.init()}return a.prototype._settings={},a.prototype._chart=null,a.prototype._data={},a.prototype._range="year",a.prototype._path="all",a.prototype._series=[],a.prototype._months=[],a.prototype.init=function(){return this._settings=$.extend({$element:$(".js-chart"),$toggle:$(".js-chart-toggle"),$range:$(".js-chart-range"),$rangeSelect:$(".js-chart-range-select"),node:".ct-chart",data:[],render:!0,activeClass:"is-active",dataAttr:"chart-toggle"},this.options),this._setInternalData(),this._setSeries(),this._settings.render&&this._renderChart(),this._setEventHandlers()},a.prototype._setRange=function(a){return this._range=a},a.prototype._setPath=function(a){return this._path=a},a.prototype._setInternalData=function(a,b){return a==null&&(a=null),b==null&&(b=null),a===null&&(a=this._range),b===null&&(b=this._path),this._setRange(a),this._setPath(b),this._data=this._settings.data[a][b],this._months=this._settings.data[a].months},a.prototype._setEventHandlers=function(){var a=this;return this._settings.$toggle.on("click",function(b){var c;return b.preventDefault(),c=$(b.currentTarget).data(a._settings.dataAttr),a._settings.$toggle.parent().removeClass(a._settings.activeClass),$(b.currentTarget).parent().addClass(a._settings.activeClass),a._setInternalData(null,c),a._renderChart()}),this._settings.$range.on("click",function(b){var c,d;b.preventDefault(),c=$(b.currentTarget),d=c.data(a._settings.dataAttr),a._settings.$rangeSelect.attr("data-"+a._settings.dataAttr,c.data(a._settings.dataAttr)).text(c.text()),a._settings.$range.removeClass(a._settings.activeClass),c.addClass(a._settings.activeClass);switch(d){case"year":return a._setInternalData("year"),a._renderChart();case"sixMonths":return a._setInternalData("sixMonths"),a._renderChart()}})},a.prototype._setSeries=function(){var a,b,c,d,e,f,g;this._series=[],f=this._data,g=[];for(d=0,e=f.length;d<e;d++)b=f[d],c=moment(b.course_started_at).format("MMM"),a=moment(b.course_completed_at).format("MMM"),b={name:b.course,data:this._setData(this._data.indexOf(b),c,a),className:b.path},g.push(this._series.push(b));return g},a.prototype._setData=function(a,b,c){var d,e,f,g,h,i,j,k;d=[],k=this._months;for(i=0,j=k.length;i<j;i++)f=k[i],g=this._months.indexOf(f),h=this._months.indexOf(b),e=this._months.indexOf(c),f===b||f===c?d.push(a):g>h&&g<e?d.push(a):d.push(null);return d},a.prototype._renderChart=function(){var a,b,c=this;this._setSeries(),a={labels:this._months,series:this._series},b={fullWidth:!0,axisY:{onlyInteger:!0,offset:110,scaleMinSpace:20,labelInterpolationFnc:function(a){if(a!==c._data.length)return c._data[a].course}},chartPadding:{bottom:20,left:0,right:25,top:40},low:0},this._chart=new Chartist.Line(this._settings.node,a,b);if(typeof data!="undefined"&&data!==null)return this._chart.update(a)},a}()})).call(this)